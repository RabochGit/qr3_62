import telebot
from telebot import custom_filters
from telebot import StateMemoryStorage
from telebot.handler_backends import StatesGroup, State

'''‚ùóÔ∏è‚ú®–°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞: https://t.me/std_assist_bot‚ú®‚ùóÔ∏è'''

state_storage = StateMemoryStorage()

bot = telebot.TeleBot("6560476325:AAHKO3tmz_yWUD9HrZQBQhXkUt1Xlp71iPs",
                      state_storage=state_storage, parse_mode='Markdown')
id_my = 6597025411
bot.send_message(id_my, '‚úÖ–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω‚úÖ')

class PollState(StatesGroup):
    name = State()
    age = State()


class HelpState(StatesGroup):
    wait_text = State()


text_poll = "–î–∞–≤–∞–π –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è"
text_button_1 = "–ü–æ–º–æ—â—å –≤ —É—á—ë–±–µ"
text_button_2 = "–õ–∞–π—Ç–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç"
text_button_3 = "–•–æ—á—É –∫—É—à–∞—Ç—å"


text_b_1 = "üè´‚Äçüéìüìö*–í–æ—Ç 5 –ª–∞–π—Ñ—Ö–∞–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –ª—É—á—à–µ —É—á–∏—Ç—å—Å—è –∏ —É—Å–≤–∞–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:*\n\n"\
    "‚ùáÔ∏èÔ∏è1Ô∏è‚É£ –†–∞–∑–±–µ–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ —á–∞—Å—Ç–∏: –ü—ã—Ç–∞—Ç—å—Å—è –∑–∞–ø–æ–º–Ω–∏—Ç—å –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–æ. " \
        "–†–∞–∑–¥–µ–ª–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –∏ —É—Å–≤–æ—è–π—Ç–µ –∏—Ö –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ª—É—á—à–µ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.\n\n"\
    "‚ùáÔ∏è2Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π: –°–≤—è–∑—ã–≤–∞–π—Ç–µ –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏. " \
        "–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ª–µ–≥—á–µ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —É–¥–µ—Ä–∂–∏–≤–∞—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–æ–Ω—è—Ç–∏—è–º–∏.\n\n"\
    "‚ùáÔ∏è3Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–±—É—á–µ–Ω–∏—è: –í–º–µ—Å—Ç–æ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –∏–ª–∏ —É—á–µ–±–Ω–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –æ–±—É—á–µ–Ω–∏–∏. " \
        "–ü–∏—à–∏—Ç–µ —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏, –æ–±—Å—É–∂–¥–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏ –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç—å –∏–∑—É—á–∞–µ–º—ã–π –ø—Ä–µ–¥–º–µ—Ç —Å–∞–º–æ–º—É —Å–µ–±–µ.\n\n"\
    "‚ùáÔ∏è4Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. " \
        "–í–∫–ª—é—á–∞–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–Ω–∏–≥–∏, –≤–∏–¥–µ–æ, –≤–∏–¥–µ–æ–ª–µ–∫—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ–±—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥–º–µ—Ç —Å —Ä–∞–∑–Ω—ã—Ö —Ç–æ—á–µ–∫ –∑—Ä–µ–Ω–∏—è.\n\n"\
    "‚ùáÔ∏è5Ô∏è‚É£ –û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è: –†–∞–∑–¥–µ–ª–∏—Ç–µ –≤—Ä–µ–º—è –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏–∑—É—á–µ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞. " \
        "–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –∑–∞–±—ã–≤–∞–Ω–∏–µ.\n"\
    "–ù–∞–¥–µ—é—Å—å, —ç—Ç–∏ –ª–∞–π—Ñ—Ö–∞–∫–∏ –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –≤ —É—á–µ–±–µ! –£–¥–∞—á–∏!"
text_b_2 = "[‚ú®üéßüéßüéß‚ú®–¢—É—Ç](https://music.yandex.ru/users/Pchi.Hi/playlists/1029) —Ç—ã –Ω–∞–π–¥—ë—à—å –ª–∞–π—Ç–æ–≤—É—é [(–ª—ë–≥–∫—É—é, —Å–ø–æ–∫–æ–π–Ω—É—é) –º—É–∑—ã–∫—É](https://music.yandex.ru/users/Pchi.Hi/playlists/1029).\n" \
           "–ï—ë –º–æ–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∑.\n"
text_b_3 = "üç±–í–æ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ –ø—è—Ç–∏ –ø—Ä–æ—Å—Ç—ã—Ö, –Ω–æ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∏ –≤–∫—É—Å–Ω—ã—Ö –±–ª—é–¥, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏:\n\n"\
"üí°1Ô∏è‚É£ –ú–∞–∫–∞—Ä–æ–Ω—ã —Å —Å—ã—Ä–æ–º:\nüßÄüçù\n"\
"         - –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ –º–∞–∫–∞—Ä–æ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —É–ø–∞–∫–æ–≤–∫–µ.\n"\
"         - –û—Ç–¥–µ–ª—å–Ω–æ –Ω–∞–≥—Ä–µ–π—Ç–µ –º–æ–ª–æ–∫–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞—Ç–µ—Ä—Ç—ã–π —Å—ã—Ä, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ—É—Å.\n"\
"         - –ü–æ–ª–µ–π—Ç–µ –º–∞–∫–∞—Ä–æ–Ω—ã –≥–æ—Ç–æ–≤—ã–º —Å—ã—Ä–Ω—ã–º —Å–æ—É—Å–æ–º –∏ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ.\n\n"\
"üí°2Ô∏è‚É£ –†–∏—Å–æ–≤–∞—è –∫–∞—à–∞ —Å —Ç—É—à—ë–Ω—ã–º–∏ –æ–≤–æ—â–∞–º–∏:\nüçöü•ïüßÖüçÖ\n"\
"         - –°–≤–∞—Ä–∏—Ç–µ —Ä–∏—Å –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —É–ø–∞–∫–æ–≤–∫–µ.\n"\
"         - –ù–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –Ω–∞–≥—Ä–µ–π—Ç–µ –º–∞—Å–ª–æ –∏ –æ–±–∂–∞—Ä—å—Ç–µ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–µ –æ–≤–æ—â–∏ (–º–æ—Ä–∫–æ–≤—å, –ª—É–∫, –ø–æ–º–∏–¥–æ—Ä—ã –∏ —Ç.–¥.) –¥–æ –º—è–≥–∫–æ—Å—Ç–∏.\n"\
"         - –î–æ–±–∞–≤—å—Ç–µ –æ–≤–æ—â–∏ –∫ —Ä–∏—Å—É, –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ –∏ –¥–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Ç—å—Å—è.\n\n"\
"üí°3Ô∏è‚É£ –û–º–ª–µ—Ç —Å –æ–≤–æ—â–∞–º–∏:\nüç≥üßÖüçÖ\n"\
"         - –í–∑–±–µ–π—Ç–µ —è–π—Ü–∞ —Å —Å–æ–ª—å—é –∏ –ø–µ—Ä—Ü–µ–º –≤ –º–∏—Å–∫–µ.\n"\
"         - –ù–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –Ω–∞–≥—Ä–µ–π—Ç–µ –º–∞—Å–ª–æ –∏ –æ–±–∂–∞—Ä—å—Ç–µ –º–µ–ª–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–µ –æ–≤–æ—â–∏ (–ø–∞–ø—Ä–∏–∫—É, –ø–æ–º–∏–¥–æ—Ä—ã, –ª—É–∫ –∏ —Ç.–¥.) –¥–æ –º—è–≥–∫–æ—Å—Ç–∏.\n"\
"         - –í–ª–µ–π—Ç–µ –≤–∑–±–∏—Ç—ã–µ —è–π—Ü–∞ –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥—É –∏ –≥–æ—Ç–æ–≤—å—Ç–µ –æ–º–ª–µ—Ç –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.\n\n"\
"üí°4Ô∏è‚É£ –ì—Ä–µ—á–∫–∞ —Å –∫—É—Ä–∏—Ü–µ–π:\nüçöüçñ\n"\
"         - –°–≤–∞—Ä–∏—Ç–µ –≥—Ä–µ—á–∫—É –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —É–ø–∞–∫–æ–≤–∫–µ.\n"\
"         - –ù–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –Ω–∞–≥—Ä–µ–π—Ç–µ –º–∞—Å–ª–æ –∏ –æ–±–∂–∞—Ä—å—Ç–µ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—É—é –∫—É—Ä–∏–Ω—É—é –≥—Ä—É–¥–∫—É –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–∏.\n"\
"         - –î–æ–±–∞–≤—å—Ç–µ –≥–æ—Ç–æ–≤—É—é –≥—Ä–µ—á–∫—É –∏ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ —Å –∫—É—Ä–∏—Ü–µ–π.\n\n"\
"üí°5Ô∏è‚É£ –¢–æ—Å—Ç —Å –∞–≤–æ–∫–∞–¥–æ –∏ —è–π—Ü–æ–º:\nü•™üç≥ü•ë\n"\
"         - –ù–∞–º–∞–∂—å—Ç–µ —Ö–ª–µ–± –ª–æ–º—Ç–∏–∫–æ–º –∞–≤–æ–∫–∞–¥–æ.\n"\
"         - –ù–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –Ω–∞–≥—Ä–µ–π—Ç–µ –º–∞—Å–ª–æ–∂–∞—Ä—å—Ç–µ —è–π—Ü–æ (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∂–µ–ª–∞—Ç–µ–ª—å–Ω—É—é —Å—Ç–µ–ø–µ–Ω—å –ø—Ä–æ–∂–∞—Ä–∫–∏).\n"\
"         - –ü–æ–ª–æ–∂–∏—Ç–µ —è–π—Ü–æ –Ω–∞ —Ç–æ—Å—Ç —Å –∞–≤–æ–∫–∞–¥–æ."


menu_keyboard = telebot.types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
menu_keyboard.add(
    telebot.types.KeyboardButton(
        text_poll,
    )
)
menu_keyboard.add(
    telebot.types.KeyboardButton(
        text_button_1,
    )
)

menu_keyboard.add(
    telebot.types.KeyboardButton(
        text_button_2,
    ),
    telebot.types.KeyboardButton(
        text_button_3,
    )
)


@bot.message_handler(state="*", commands=['start'])
def start_ex(message):
    name = f'\nName:, {message.from_user.first_name} {message.from_user.last_name}'
    bot.send_message(id_my, str(message.chat.id) + name + ':\n–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')
    bot.send_message(
        message.chat.id,
        '–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ—â–Ω–∏–∫-–∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.',
        reply_markup=menu_keyboard)

@bot.message_handler(func=lambda message: text_poll == message.text)
def first(message):
    bot.send_message(message.chat.id, '–°—É–ø–µ—Ä! –í–∞—à–µ –∏–º—è?')
    bot.set_state(message.from_user.id, PollState.name, message.chat.id)


@bot.message_handler(state=PollState.name)
def name(message):
    with bot.retrieve_data(message.from_user.id, message.chat.id) as data:
        data['name'] = message.text
    bot.send_message(message.chat.id, '–°—É–ø–µ—Ä! –í–∞—à –≤–æ–∑—Ä–∞—Å—Ç?')
    bot.set_state(message.from_user.id, PollState.age, message.chat.id)


@bot.message_handler(state=PollState.age)
def age(message):
    with bot.retrieve_data(message.from_user.id, message.chat.id) as data:
        data['age'] = message.text
    bot.send_message(message.chat.id, '–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é!', reply_markup=menu_keyboard)
    bot.delete_state(message.from_user.id, message.chat.id)


@bot.message_handler(func=lambda message: text_button_1 == message.text)
def help_command(message):
    bot.send_message(message.chat.id, text_b_1, reply_markup=menu_keyboard)


@bot.message_handler(func=lambda message: text_button_2 == message.text)
def help_command(message):
    bot.send_message(message.chat.id, text_b_2, reply_markup=menu_keyboard)


@bot.message_handler(func=lambda message: text_button_3 == message.text)
def help_command(message):
    bot.send_message(message.chat.id, text_b_3, reply_markup=menu_keyboard)


bot.add_custom_filter(custom_filters.StateFilter(bot))
bot.add_custom_filter(custom_filters.TextMatchFilter())

bot.infinity_polling()